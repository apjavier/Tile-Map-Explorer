!function(t){var e={};function i(r){if(e[r])return e[r].exports;var s=e[r]={i:r,l:!1,exports:{}};return t[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(r,s,function(e){return t[e]}.bind(null,s));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);class r{constructor(){this.oldState={},this.newState={},window.addEventListener("keydown",t=>{t.preventDefault(),this.newState[t.key]=!0}),window.addEventListener("keyup",t=>{t.preventDefault(),this.newState[t.key]=!1})}update(){this.oldState=JSON.parse(JSON.stringify(this.newState))}keyPressed(t){return this.newState[t]}keyDown(t){return this.newState[t]&&!this.oldState[t]}keyUp(t){return!this.newState[t]&&this.oldState[t]}}var s=new class{constructor(t,e){this._start=null,this.WIDTH=t,this.HEIGHT=e,this.input=new r,this.entities=[],this.map=null,this.backBuffer=document.createElement("canvas"),this.backBuffer.width=this.WIDTH,this.backBuffer.height=this.HEIGHT,this.backBufferCtx=this.backBuffer.getContext("2d"),this.screenBuffer=document.createElement("canvas"),this.screenBuffer.width=this.WIDTH,this.screenBuffer.height=this.HEIGHT,this.screenBufferCtx=this.screenBuffer.getContext("2d"),document.body.append(this.screenBuffer)}addEntity(t){this.entities.push(t)}addMap(){this.map=[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}update(t){this.entities.forEach(e=>e.update(t,this.input)),this.input.update()}render(t){this.backBufferCtx.fillStyle="red",this.backBufferCtx.fillRect(0,0,this.WIDTH,this.HEIGHT);for(var e=0;col<32;e++)for(var i=0;i<32;i++){var r=this.map[e][i];drawTile(r,32*e,24*i)}this.entities.forEach(e=>e.render(t,this.backBufferCtx)),this.screenBufferCtx.drawImage(this.backBuffer,0,0)}drawTile(t,e,i){1==t?(this.backBufferCtx.fillStyle="green",this.backBufferCtx.fillRect(e,i,32,32)):2==t?(this.backBufferCtx.fillStyle="brown",this.backBufferCtx.fillRect(e,i,32,32)):3==t&&(this.backBufferCtx.fillStyle="blue",this.backBufferCtx.fillRect(e,i,32,32))}loop(t){var e=this._frame_start?t-this._frame_start:0;this.update(e),this.render(e),this._frame_start=t,window.requestAnimationFrame(t=>{this.loop(t)})}}(1024,1024);s.addMap(),s.addEntity(new class{constructor(t,e){this.x=t,this.y=e,this.direction="south",new Image,this.img.src="rpgspites1/ranger_f.png",this.sprite={url:"rpgspites1/ranger_f.png",pos:[1,2],size:[32,36],speed:6,frames:[1,2,1,0,1],dir:"horizontal",once:!1}}update(t,e){e.keyPressed("ArrowLeft")&&(this.x-=.5*t,this.direction="west"),e.keyPressed("ArrowRight")&&(this.x+=.5*t,this.direction="east"),e.keyPressed("ArrowUp")&&(this.y-=.5*t,this.direction="north"),e.keyPressed("ArrowDown")&&(this.y+=.5*t,this.direction="south"),this._index+=this.sprite.speed*t}render(t,e){var i;if(e.fillStyle="blue",e.beginPath(),e.arc(this.x,this.y,25,0,2*Math.PI),e.fill(),"north"==this.direction?this.sprite={url:"rpgspites1/ranger_f.png",pos:[1,0],size:[32,36],speed:6,frames:[1,2,1,0,1],dir:"horizontal",once:!1}:"east"==this.direction?this.sprite={url:"rpgspites1/ranger_f.png",pos:[1,1],size:[32,36],speed:6,frames:[1,2,1,0,1],dir:"horizontal",once:!1}:"south"==this.direction?this.sprite={url:"rpgspites1/ranger_f.png",pos:[1,2],size:[32,36],speed:6,frames:[1,2,1,0,1],dir:"horizontal",once:!1}:"west"==this.direction&&(this.sprite={url:"rpgspites1/ranger_f.png",pos:[1,3],size:[32,36],speed:6,frames:[1,2,1,0,1],dir:"horizontal",once:!1}),this.sprite.speed>0){var r=this.sprite.frames.length,s=Math.floor(this._index);if(i=this.sprite.frames[s%r],this.sprite.once&&s>=r)return void(this.sprite.done=!0);i=1;var n=this.sprite.pos[0],a=this.sprite.pos[1];"vertical"==this.dir?a+=i*this.sprite.size[1]:n+=i*this.sprite.size[0],ctx.drawImage("rpgspites1/ranger_f.png",n,a,this.sprite.size[0],this.sprite.size[1],0,0,this.sprite.size[0],this.sprite.size[1])}}}(512,512)),s.loop()}]);